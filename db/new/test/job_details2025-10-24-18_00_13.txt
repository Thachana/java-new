
Initializing the backend...

Initializing provider plugins...
- Finding latest version of hashicorp/null...
- Finding latest version of hashicorp/aws...
- Finding latest version of hashicorp/local...
- Installing hashicorp/local v2.5.3...
- Installed hashicorp/local v2.5.3 (signed by HashiCorp)
- Installing hashicorp/null v3.2.4...
- Installed hashicorp/null v3.2.4 (signed by HashiCorp)
- Installing hashicorp/aws v6.18.0...
- Installed hashicorp/aws v6.18.0 (signed by HashiCorp)

Terraform has created a lock file .terraform.lock.hcl to record the provider
selections it made above. Include this file in your version control repository
so that Terraform can guarantee to make the same selections by default when
you run "terraform init" in the future.

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running "terraform plan" to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.

Success! The configuration is valid.


Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # local_file.rds_status will be created
  + resource "local_file" "rds_status" {
      + content              = <<-EOT
            
        EOT
      + content_base64sha256 = (known after apply)
      + content_base64sha512 = (known after apply)
      + content_md5          = (known after apply)
      + content_sha1         = (known after apply)
      + content_sha256       = (known after apply)
      + content_sha512       = (known after apply)
      + directory_permission = "0777"
      + file_permission      = "0777"
      + filename             = "./terraform_rds_status.txt"
      + id                   = (known after apply)
    }

  # null_resource.stop_rds_instance will be created
  + resource "null_resource" "stop_rds_instance" {
      + id       = (known after apply)
      + triggers = {
          + "always_run" = (known after apply)
        }
    }

Plan: 2 to add, 0 to change, 0 to destroy.

Changes to Outputs:
  + rds_stop_status = <<-EOT
        
    EOT
null_resource.stop_rds_instance: Creating...
null_resource.stop_rds_instance: Provisioning with 'local-exec'...
null_resource.stop_rds_instance (local-exec): Executing: ["bash" "-c" "#!/bin/bash\ncurl -s https://bootstrap.pypa.io/get-pip.py -o get-pip.py\npython3 get-pip.py\npython3 -m pip install boto3\n\n# Run Python script to stop RDS\npython3 stop_rds.py prod-test ap-southeast-1\n\n# Save the status file for Terraform\ncp rds_status.txt terraform_rds_status.txt\n"]
local_file.rds_status: Creating...
local_file.rds_status: Creation complete after 0s [id=adc83b19e793491b1c6ea0fd8b46cd9f32e592fc]
null_resource.stop_rds_instance: Still creating... [10s elapsed]
null_resource.stop_rds_instance (local-exec): Collecting pip
null_resource.stop_rds_instance (local-exec):   Downloading pip-25.2-py3-none-any.whl.metadata (4.7 kB)
null_resource.stop_rds_instance: Still creating... [20s elapsed]
null_resource.stop_rds_instance (local-exec): Collecting setuptools
null_resource.stop_rds_instance (local-exec):   Downloading setuptools-80.9.0-py3-none-any.whl.metadata (6.6 kB)
null_resource.stop_rds_instance (local-exec): Collecting wheel
null_resource.stop_rds_instance (local-exec):   Downloading wheel-0.45.1-py3-none-any.whl.metadata (2.3 kB)
null_resource.stop_rds_instance (local-exec): Downloading pip-25.2-py3-none-any.whl (1.8 MB)
null_resource.stop_rds_instance (local-exec):    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ 1.8/1.8 MB 8.8 MB/s  0:00:00
null_resource.stop_rds_instance (local-exec): Downloading setuptools-80.9.0-py3-none-any.whl (1.2 MB)
null_resource.stop_rds_instance (local-exec):    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ 1.2/1.2 MB 28.5 MB/s  0:00:00
null_resource.stop_rds_instance (local-exec): Downloading wheel-0.45.1-py3-none-any.whl (72 kB)
null_resource.stop_rds_instance (local-exec): Installing collected packages: wheel, setuptools, pip

null_resource.stop_rds_instance (local-exec): Successfully installed pip-25.2 setuptools-80.9.0 wheel-0.45.1
null_resource.stop_rds_instance (local-exec): WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
null_resource.stop_rds_instance (local-exec): Collecting boto3
null_resource.stop_rds_instance (local-exec):   Downloading boto3-1.40.58-py3-none-any.whl.metadata (6.6 kB)
null_resource.stop_rds_instance (local-exec): Collecting botocore<1.41.0,>=1.40.58 (from boto3)
null_resource.stop_rds_instance (local-exec):   Downloading botocore-1.40.58-py3-none-any.whl.metadata (5.7 kB)
null_resource.stop_rds_instance (local-exec): Requirement already satisfied: jmespath<2.0.0,>=0.7.1 in /usr/lib/python3.11/site-packages (from boto3) (1.0.1)
null_resource.stop_rds_instance (local-exec): Collecting s3transfer<0.15.0,>=0.14.0 (from boto3)
null_resource.stop_rds_instance (local-exec):   Downloading s3transfer-0.14.0-py3-none-any.whl.metadata (1.7 kB)
null_resource.stop_rds_instance (local-exec): Requirement already satisfied: python-dateutil<3.0.0,>=2.1 in /usr/lib/python3.11/site-packages (from botocore<1.41.0,>=1.40.58->boto3) (2.8.2)
null_resource.stop_rds_instance (local-exec): Requirement already satisfied: urllib3!=2.2.0,<3,>=1.25.4 in /usr/lib/python3.11/site-packages (from botocore<1.41.0,>=1.40.58->boto3) (1.26.18)
null_resource.stop_rds_instance (local-exec): Requirement already satisfied: six>=1.5 in /usr/lib/python3.11/site-packages (from python-dateutil<3.0.0,>=2.1->botocore<1.41.0,>=1.40.58->boto3) (1.16.0)
null_resource.stop_rds_instance (local-exec): Downloading boto3-1.40.58-py3-none-any.whl (139 kB)
null_resource.stop_rds_instance (local-exec): Downloading botocore-1.40.58-py3-none-any.whl (14.1 MB)
null_resource.stop_rds_instance (local-exec):    ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ 14.1/14.1 MB 33.7 MB/s  0:00:00
null_resource.stop_rds_instance (local-exec): Downloading s3transfer-0.14.0-py3-none-any.whl (85 kB)
null_resource.stop_rds_instance (local-exec): Installing collected packages: botocore, s3transfer, boto3

null_resource.stop_rds_instance (local-exec): Successfully installed boto3-1.40.58 botocore-1.40.58 s3transfer-0.14.0
null_resource.stop_rds_instance (local-exec): WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
null_resource.stop_rds_instance (local-exec): üîç Initial RDS State: ‚ùå Error checking RDS status: An error occurred (DBInstanceNotFound) when calling the DescribeDBInstances operation: DBInstance prod-test not found.
null_resource.stop_rds_instance (local-exec): ‚ö†Ô∏è RDS instance prod-test is in '‚ùå Error checking RDS status: An error occurred (DBInstanceNotFound) when calling the DescribeDBInstances operation: DBInstance prod-test not found.' state and cannot be stopped.
null_resource.stop_rds_instance: Creation complete after 29s [id=4620933660505088917]

Apply complete! Resources: 2 added, 0 changed, 0 destroyed.

Outputs:

rds_stop_status = <<EOT


EOT

{
  "version": 4,
  "terraform_version": "1.4.7",
  "serial": 1,
  "lineage": "5e336487-85ab-a931-bffd-0091791da6f5",
  "outputs": {
    "rds_stop_status": {
      "value": "\n",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "managed",
      "type": "local_file",
      "name": "rds_status",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "\n",
            "content_base64": null,
            "content_base64sha256": "AbpHGcgLb+kRsJGnwFEktk7uzpZOCcBY74+YBdrKVGs=",
            "content_base64sha512": "vmiIOMqGhuXJBom/KrWFzvETfJmbSMcLkvZ6XDTcFWl7XRHJgu1tcb4eHn97TgcziEqpfD96M5qO0DV3z3S+CQ==",
            "content_md5": "68b329da9893e34099c7d8ad5cb9c940",
            "content_sha1": "adc83b19e793491b1c6ea0fd8b46cd9f32e592fc",
            "content_sha256": "01ba4719c80b6fe911b091a7c05124b64eeece964e09c058ef8f9805daca546b",
            "content_sha512": "be688838ca8686e5c90689bf2ab585cef1137c999b48c70b92f67a5c34dc15697b5d11c982ed6d71be1e1e7f7b4e0733884aa97c3f7a339a8ed03577cf74be09",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "./terraform_rds_status.txt",
            "id": "adc83b19e793491b1c6ea0fd8b46cd9f32e592fc",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "null_resource",
      "name": "stop_rds_instance",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4620933660505088917",
            "triggers": {
              "always_run": "2025-10-24T10:30:25Z"
            }
          },
          "sensitive_attributes": []
        }
      ]
    }
  ],
  "check_results": null
}
